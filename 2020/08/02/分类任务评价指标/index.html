<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>分类任务评价指标 | 东北石油大学智能技术与自然语言处理实验室</title><meta name="description" content="分类任务评价指标"><meta name="keywords" content="NLP,深度学习,多分类,评价指标"><meta name="author" content="东北石油大学智能技术与自然语言处理实验室"><meta name="copyright" content="东北石油大学智能技术与自然语言处理实验室"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/ava.jpg"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="分类任务评价指标"><meta name="twitter:description" content="分类任务评价指标"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/zhengguanyu/PhotoRepos@v1.1/img/封面.png"><meta property="og:type" content="article"><meta property="og:title" content="分类任务评价指标"><meta property="og:url" content="https://nlplab406.github.io/2020/08/02/%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/"><meta property="og:site_name" content="东北石油大学智能技术与自然语言处理实验室"><meta property="og:description" content="分类任务评价指标"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhengguanyu/PhotoRepos@v1.1/img/封面.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://nlplab406.github.io/2020/08/02/%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/"><link rel="next" title="论文阅读：Aspect-based Sentiment Classification with Aspect-specific Graph Convolutional Networks" href="https://nlplab406.github.io/2020/08/02/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%9AAspect-based%20Sentiment%20Classification%20with%20Aspect-specific%20Graph%20Convolutional%20Networks/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">东北石油大学智能技术与自然语言处理实验室</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/ava.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">10</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">17</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#分类问题评价F1指标"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">分类问题评价F1指标</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#文章梗概"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">文章梗概</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#分类指标"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">分类指标</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#二分类举例：共12个预测结果"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">二分类举例：共12个预测结果</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#统计混淆矩阵："><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">统计混淆矩阵：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#多分类举例：标签总数-5分类【0，1，2，3，4】，共12个预测结果"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">多分类举例：标签总数 5分类【0，1，2，3，4】，共12个预测结果</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#统计混淆矩阵：-1"><span class="toc_mobile_items-number">1.2.3.1.</span> <span class="toc_mobile_items-text">统计混淆矩阵：</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#代码实现："><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">代码实现：</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#SKlearn方法计算："><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">SKlearn方法计算：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#手动实现（python3-numpy数组）"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">手动实现（python3,numpy数组）</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#分类问题评价F1指标"><span class="toc-number">1.</span> <span class="toc-text">分类问题评价F1指标</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#文章梗概"><span class="toc-number">1.1.</span> <span class="toc-text">文章梗概</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分类指标"><span class="toc-number">1.2.</span> <span class="toc-text">分类指标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#二分类举例：共12个预测结果"><span class="toc-number">1.2.1.</span> <span class="toc-text">二分类举例：共12个预测结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#统计混淆矩阵："><span class="toc-number">1.2.2.</span> <span class="toc-text">统计混淆矩阵：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多分类举例：标签总数-5分类【0，1，2，3，4】，共12个预测结果"><span class="toc-number">1.2.3.</span> <span class="toc-text">多分类举例：标签总数 5分类【0，1，2，3，4】，共12个预测结果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#统计混淆矩阵：-1"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">统计混淆矩阵：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码实现："><span class="toc-number">1.3.</span> <span class="toc-text">代码实现：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SKlearn方法计算："><span class="toc-number">1.3.1.</span> <span class="toc-text">SKlearn方法计算：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#手动实现（python3-numpy数组）"><span class="toc-number">1.3.2.</span> <span class="toc-text">手动实现（python3,numpy数组）</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/zhengguanyu/PhotoRepos@v1.1/img/封面.png)"><div id="post-info"><div id="post-title"><div class="posttitle">分类任务评价指标</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-08-02<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-08-02</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%97%AB%E5%87%AF%E5%B3%B0/">闫凯峰</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%97%AB%E5%87%AF%E5%B3%B0/NLP/">NLP</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">1.6k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>阅读时长: 7 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="分类问题评价F1指标"><a href="#分类问题评价F1指标" class="headerlink" title="分类问题评价F1指标"></a>分类问题评价F1指标</h1><blockquote>
<h2 id="文章梗概"><a href="#文章梗概" class="headerlink" title="文章梗概"></a>文章梗概</h2><p>&emsp;&emsp;本文我们将介绍最常见的几种分类指标，其中包括accuracy, precision, recall, f1；但是这些指标通常应用于二分类中，在多分类的计算方法略有差异，因此又产生了macro(precision,recall,f1)与micro(precision,recall,f1)两个宏观上与微观上的f1评价方法。</p>
<p>&emsp;&emsp;为了读者便于理解，本文给出了很多公式，甚至是每一步的计算方法，读者如果觉得理解起来很困难，可以先看下方的示例，笔者分别添加了二分类和多分类的示例让读者有个更加全方位的理解；</p>
<p>&emsp;&emsp;本文最后，给出了sklearn中计算这些指标的API和示例，读者根据自己理解也给出了python3的代码，并附有详细的注释。</p>
<h2 id="分类指标"><a href="#分类指标" class="headerlink" title="分类指标"></a><strong>分类指标</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">二分类</th>
<th style="text-align:center">多分类</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TP(真正例)</td>
<td style="text-align:center">预测为真，真实为正例(right）</td>
<td style="text-align:center">预测为真，真实为正例</td>
</tr>
<tr>
<td style="text-align:center">FP(假正例）</td>
<td style="text-align:center">预测为真，真实为负例(wrong)</td>
<td style="text-align:center">预测为真，真实为正例</td>
</tr>
<tr>
<td style="text-align:center">FN(假负例)</td>
<td style="text-align:center">预测为假，真实为正例(miss)</td>
<td style="text-align:center">预测为真，真实为正例</td>
</tr>
<tr>
<td style="text-align:center">TN(真负例)</td>
<td style="text-align:center">预测为假，真实为负例(right)</td>
<td style="text-align:center">/</td>
</tr>
</tbody>
</table>
</div>
<p align="right"><font color="red" size="2">预测全为真(准确率)；真实全为真(召回率)</font></p>

<hr>
<ul>
<li>下面首先介绍二分类评价指标</li>
</ul>
<script type="math/tex; mode=display">
准确率：   \qquad Accuracy = \frac {TP+TN}{TP+TF+FN+TN} \tag 1</script><script type="math/tex; mode=display">
精确度：\qquad Precision = \frac {TP}{TP+TF}\qquad\qquad\qquad\tag 2</script><script type="math/tex; mode=display">
召回率：\qquad\qquad Recall=\frac {TP}{TP+FN}\qquad\qquad\qquad \tag 3</script><script type="math/tex; mode=display">
F1-score： \qquad F1= \frac {2*Precision*Recall}{Precision+Recall} \qquad\qquad\qquad\tag 4</script><ul>
<li><p>多分类指标</p>
<ul>
<li>micro-Precision:<script type="math/tex; mode=display">
micro{-}Precision=\frac{TP0+TP1+TP2+...}{(TP0+FP0)+(TP1+FP1)+(TP2+FP2)+...} \tag 5</script></li>
</ul>
</li>
<li><p>micro-Recall:</p>
<script type="math/tex; mode=display">
 micro{-}Recall=\frac{TP0+TP1+TP2+...}{(TP0+FN0)+(TP1+FN1)+(TP2+FN2)+...} \tag 6</script><ul>
<li><p>micro-F1:</p>
<script type="math/tex; mode=display">
\qquad micro{-}F1=\frac{2*micro{-}Precision*micro{-}Recall}{micro{-}Precision+micro{-}Recall} \tag 7</script></li>
<li><p>macro-Precision(每个类别的presicion的加和平均数):</p>
<script type="math/tex; mode=display">
Precision0=\frac{TP0}{TP0+FP0};\qquad Precision1=\frac{TP1}{TP1+FP1};\qquad Precision2=\frac{TP2}{TP2+FP2}...
\\ \ \\
micro{-}Precision=(Precision0+Precision1+Precision2...)/n \tag 8</script></li>
<li><p>macro-Recall(每个类别的recall的加和平均数):</p>
<script type="math/tex; mode=display">
Recall0=\frac{TP0}{TP0+FN0};\qquad Recall2=\frac{TP1}{TP1+FN1};\qquad Recall2=\frac{TP2}{TP2+FN2}...
\\ \ \\
micro{-}Recall=(Recall0+Recall1+Recall2+...)/n \tag {9}</script></li>
<li><p><font color="red">macro-F1(每个类别的f1的加和平均数)</font></p>
<script type="math/tex; mode=display">
F1(0)=\frac{2*Precision0*Recall0}{Precision0+Recall0}; \qquad F1(1)=\frac{2*Precision1*Recall1}{Precision1+Recall1};\qquad F1(2)=\frac{2*Precision2*Recall2}{Precision2+Recall2}...\\ \ \\
\qquad macro{-}F1=\frac{F1(0)+F1(1)+F1(2)+...}{n} \tag {10}</script></li>
<li><p><font color="red">Accuracy(至于这个为什么请看下方示例):</font></p>
<script type="math/tex; mode=display">
准确率：   \qquad Accuracy = micro{-}Precision = micro{-}Recall = micro{-}F1\tag {11}</script></li>
</ul>
</li>
</ul>
<hr>
<h3 id="二分类举例：共12个预测结果"><a href="#二分类举例：共12个预测结果" class="headerlink" title="二分类举例：共12个预测结果"></a>二分类举例：共12个预测结果</h3><div class="table-container">
<table>
<thead>
<tr>
<th>真实标签</th>
<th style="text-align:center">0</th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">1</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
<th style="text-align:center">0</th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">1</th>
</tr>
</thead>
<tbody>
<tr>
<td>预测标签</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
</div>
<h3 id="统计混淆矩阵："><a href="#统计混淆矩阵：" class="headerlink" title="统计混淆矩阵："></a>统计混淆矩阵：</h3><table>
   <tr>
  <td width="200">
      <span style="float:left;margin-top:18px;">预测</span>
    <span style="float:right;margin-top:-8px;">真实</span>
  </td>
  <td>
     <center>1<center>
   </center></center></td>
   <td>
     <center>0<center>
   </center></center></td>
    </tr>
    <tr>
     <td>
       <center>1</center>
          </td>
       <td>
      <center>TP: 3</center>
       </td>
        <td>
       <center>FP: 4</center>
      </td>
    </tr>
 <tr>
    <td>
       <center>0</center>
       </td>
       <td>
       <center>FN: 3</center>
      </td>
        <td>
       <center>TF: 2</center> 
      </td>
    </tr>
</table>

<p>下面我们可以使用公式计算如下指标：</p>
<script type="math/tex; mode=display">
准确率：   \qquad Accuracy = \frac {TP+TN}{TP+TF+FN+TN}= \frac {3+2}{12}=0.41666666667
\\ \ \\
精确度：\qquad Precision = \frac {TP}{TP+TF}=\frac {3}{3+4}=0.4285714285 \qquad\qquad\qquad
\\ \ \\
召回率：\qquad\qquad Recall=\frac {TP}{TP+FN}=\frac {3}{3+3}=0.5 \qquad\qquad\qquad\qquad\qquad
\\ \ \\
F1-score： \qquad F1= \frac {2*Precision*Recall}{Precision+Recall}=\frac{2*0.4285714285*0.5}{0.4285714285+0.5}=0.4615384615384615</script><hr>
<h3 id="多分类举例：标签总数-5分类【0，1，2，3，4】，共12个预测结果"><a href="#多分类举例：标签总数-5分类【0，1，2，3，4】，共12个预测结果" class="headerlink" title="多分类举例：标签总数 5分类【0，1，2，3，4】，共12个预测结果"></a>多分类举例：标签总数 5分类【0，1，2，3，4】，共12个预测结果</h3><div class="table-container">
<table>
<thead>
<tr>
<th>真实标签</th>
<th style="text-align:center">0</th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">2</th>
<th style="text-align:center">4</th>
<th style="text-align:center">4</th>
<th style="text-align:center">3</th>
<th style="text-align:center">3</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
</tr>
</thead>
<tbody>
<tr>
<td>预测标签</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">3</td>
<td style="text-align:center">3</td>
<td style="text-align:center">1</td>
<td style="text-align:center">3</td>
</tr>
</tbody>
</table>
</div>
<h4 id="统计混淆矩阵：-1"><a href="#统计混淆矩阵：-1" class="headerlink" title="统计混淆矩阵："></a>统计混淆矩阵：</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">总计</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TP</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">0</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">FN</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">7</td>
</tr>
<tr>
<td style="text-align:center">FP</td>
<td style="text-align:center">0</td>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">3</td>
<td style="text-align:center">1</td>
<td style="text-align:center">7</td>
</tr>
</tbody>
</table>
</div>
<hr>
<script type="math/tex; mode=display">
Accuracy = \frac {TP0+TP1+TP2+...}{(TP0+FP0)+(TP1+TP1)+(TP2+FP2)+...}=\frac {5}{7+5}=0.4166666666666667
\\ \ \\
micro{-}Precision=\frac{TP0+TP1+TP2+...}{(TP0+FP0)+(TP1+FP1)+(TP2+FP2)+...}=\frac {5}{7+5}=0.4166666666666667
\\ \ \\
Recall0=\frac{TP0}{TP0+FN0};Recall2=\frac{TP1}{TP1+FN1};Recall2=\frac{TP2}{TP0+FN2}=\frac {5}{7+5}=0.4166666666666667
\\ \ \\
\qquad micro{-}F1=\frac{2*micro{-}Precision*micro{-}Recall}{micro{-}Precision+micro{-}Recall}=0.4166666666666667
\\ \ \\</script><hr>
<script type="math/tex; mode=display">
Precision0 = \frac {TP0}{TP0+FP0}=\frac {1}{1+0}=1;...\\ Recall0=\frac {TP0}{TP0+FN0}=\frac {1}{1+1}=0.5;...\\ F1(0)=F1(0)=\frac{2*Precision0*Recall0}{Precision0+Recall0}=\frac {2*1*0.5}{1+0.5}=0.66666667;...</script><script type="math/tex; mode=display">
macro{-}Precision=\frac {\frac{TP0}{TP0+FP0}+\frac{TP1}{TP1+FP1}+\frac{TP2}{TP2+FP2}+\frac{TP3}{TP3+FP3}+\frac{TP4}{TP4+FP4}}{5}
\\ \ \\
macro{-}Recall=\frac {\frac{TP0}{TP0+FN0}+\frac{TP1}{TP1+FN1}+\frac{TP2}{TP2+FN2}+\frac{TP3}{TP3+FN3}+\frac{TP4}{TP4+FN4}}{5}
\\ \ \\
macro{-}F1=\frac {F1(0)+f1(1)+F1(2)+f1(3)+f1(4)}{5}
\\ \ \\</script><p>最终的计算结果如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">macro-F1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Pericesion</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0.33</td>
<td style="text-align:center">0.5</td>
<td style="text-align:center">0.4</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0.45</td>
</tr>
<tr>
<td style="text-align:center">Recall</td>
<td style="text-align:center">0.5</td>
<td style="text-align:center">0.5</td>
<td style="text-align:center">0.33</td>
<td style="text-align:center">0.67</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0.4</td>
</tr>
<tr>
<td style="text-align:center">F1</td>
<td style="text-align:center">0.67</td>
<td style="text-align:center">0.4</td>
<td style="text-align:center">0.4</td>
<td style="text-align:center">0.5</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0.39</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="代码实现："><a href="#代码实现：" class="headerlink" title="代码实现："></a>代码实现：</h2><h3 id="SKlearn方法计算："><a href="#SKlearn方法计算：" class="headerlink" title="SKlearn方法计算："></a>SKlearn方法计算：</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metric</span><br><span class="line"></span><br><span class="line">trues = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">preds = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">print(metrics.precision_recall_fscore_support(trues, preds, average=<span class="string">'macro'</span>))</span><br><span class="line">print()</span><br><span class="line">print(metrics.precision_recall_fscore_support(trues, preds, average=<span class="string">'micro'</span>))</span><br></pre></td></tr></table></figure></div>
<ul>
<li>结果如下</li>
</ul>
<p><a href="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.6/img/闫凯峰/8.2/1.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="1" class="fancybox"><img alt="1" title="1" data-src="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.6/img/闫凯峰/8.2/1.png" class="lazyload"></a></p>
<ul>
<li>两点说明：</li>
</ul>
<p>该函数返回值为numpy数组，前三个值分别是precision, recall和F1，最后一个为support，通常为None，或者一个数组。</p>
<p>该API还有其他应用统计每个类别的precesion,recall,F1可以通过设置参数<code>average=None</code>即可，更多详细使用方法，可以到<a href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_recall_fscore_support.html#sklearn.metrics.precision_recall_fscore_support" target="_blank" rel="noopener">官网</a>查看。</p>
<h3 id="手动实现（python3-numpy数组）"><a href="#手动实现（python3-numpy数组）" class="headerlink" title="手动实现（python3,numpy数组）"></a>手动实现（python3,numpy数组）</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calculate_multilabel_metrics</span><span class="params">(labels, preds)</span>:</span></span><br><span class="line">  <span class="string">"""</span></span><br><span class="line"><span class="string">  labels: 真实标签index，不是真实类别</span></span><br><span class="line"><span class="string">  preds: 预测标签index,非真实类别</span></span><br><span class="line"><span class="string">  类别从0开始计算，与数组下标对应</span></span><br><span class="line"><span class="string">  """</span></span><br><span class="line">   num_label_type = len(set(labels))</span><br><span class="line">   TP, FP, FN = np.zeros(num_label_type), np.zeros(num_label_type), np.zeros(num_label_type)</span><br><span class="line">   <span class="keyword">for</span> label, pre_label <span class="keyword">in</span> zip(labels, preds):</span><br><span class="line">       <span class="keyword">if</span> label == pre_label:</span><br><span class="line">           TP[int(label)] += <span class="number">1</span></span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">           FN[int(label)] += <span class="number">1</span></span><br><span class="line">           FP[int(pre_label)] += <span class="number">1</span></span><br><span class="line">   <span class="keyword">return</span> TP, FP, FN</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cal_divide_zero_array</span><span class="params">(a, b)</span>:</span></span><br><span class="line"> <span class="string">"""</span></span><br><span class="line"><span class="string"> 这个函数处理计算numpy除法运算时，分母为空，直接处理成商为零</span></span><br><span class="line"><span class="string"> """</span></span><br><span class="line">  <span class="keyword">with</span> np.errstate(divide=<span class="string">'ignore'</span>, invalid=<span class="string">'ignore'</span>):</span><br><span class="line">      c = np.true_divide(a, b)</span><br><span class="line">       c[c == np.inf] = <span class="number">0</span></span><br><span class="line">       c = np.nan_to_num(c)</span><br><span class="line">   <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mutilabel_f1_score</span><span class="params">(labels, preds, method=<span class="string">'macro'</span>)</span>:</span></span><br><span class="line">   <span class="string">"""</span></span><br><span class="line"><span class="string">   method=&#123;macro, micro&#125;</span></span><br><span class="line"><span class="string">  """</span></span><br><span class="line">  precision, recall, f1 = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">  <span class="keyword">if</span> method == <span class="string">'micro'</span>:</span><br><span class="line">       right, wrong, miss = calculate_multilabel_metrics(labels, preds)</span><br><span class="line">       precision = right.sum() / (right.sum() + wrong.sum())</span><br><span class="line">       recall = right.sum() / (right.sum() + miss.sum())</span><br><span class="line">       f1 = (<span class="number">2</span> * precision * recall) / (precision + recall)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">elif</span> method == <span class="string">'macro'</span>:</span><br><span class="line">       right, wrong, miss = calculate_multilabel_metrics(labels, preds)</span><br><span class="line">       labels_type_num = len(set(labels))</span><br><span class="line">       <span class="keyword">if</span> <span class="number">0</span> <span class="keyword">not</span> <span class="keyword">in</span> right + wrong:</span><br><span class="line">          precision_array = right / (right + wrong)</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">           precision_array = cal_divide_zero_array(right, (right+wrong))</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> <span class="number">0</span> <span class="keyword">not</span> <span class="keyword">in</span> right + miss:</span><br><span class="line">           recall_array = right / (right + miss)</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">           recall_array = cal_divide_zero_array(right, (right+miss))</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> <span class="number">0</span> <span class="keyword">not</span> <span class="keyword">in</span> precision_array + recall_array:</span><br><span class="line">           f1_array = (<span class="number">2</span> * precision_array * recall_array) / (precision_array + recall_array)</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">           f1_array = cal_divide_zero_array(<span class="number">2</span>*precision_array*recall_array, (precision_array+recall_array))</span><br><span class="line"></span><br><span class="line">       precision = precision_array.sum() / labels_type_num</span><br><span class="line">       recall = recall_array.sum() / labels_type_num</span><br><span class="line">       f1 = f1_array.sum() / labels_type_num</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> precision, recall, f1</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">   trues = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">  preds = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">   print(mutilabel_f1_score(trues, preds, average=<span class="string">'macro'</span>))</span><br><span class="line">  print()</span><br><span class="line">  print(mutilabel_f1_score(trues, preds, average=<span class="string">'micro'</span>))</span><br></pre></td></tr></table></figure></div>
<ul>
<li><p>结果如下：</p>
<p><a href="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.6/img/闫凯峰/8.2/2.png" target="_blank" rel="noopener" data-fancybox="group" data-caption="2" class="fancybox"><img alt="2" title="2" data-src="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.6/img/闫凯峰/8.2/2.png" class="lazyload"></a></p>
</li>
</ul>
</blockquote>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/NLP/">NLP    </a><a class="post-meta__tags" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习    </a><a class="post-meta__tags" href="/tags/%E5%A4%9A%E5%88%86%E7%B1%BB/">多分类    </a><a class="post-meta__tags" href="/tags/%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/">评价指标    </a></div><div class="post_share"></div></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020/08/02/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%9AAspect-based%20Sentiment%20Classification%20with%20Aspect-specific%20Graph%20Convolutional%20Networks/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.5/img/朱鑫海/8.2/1.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>论文阅读：Aspect-based Sentiment Classification with Aspect-specific Graph Convolutional Networks</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/08/01/【论文阅读笔记PCNN】Distant Supervision for Relation Extraction via Piecewise Convolutional Neural Networks/" title="【论文阅读笔记PCNN】Distant Supervision for Relation Extraction via Piecewise Convolutional Neural Networks"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20200801134611553.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-08-01</div><div class="relatedPosts_title">【论文阅读笔记PCNN】Distant Supervision for Relation Extraction via Piecewise Convolutional Neural Networks</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/02/传统的机器学习方法——决策树（上）/" title="传统的机器学习方法——决策树（上）"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20200802172055879.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTMxMzMxOQ==,size_16,color_FFFFFF,t_70"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-08-02</div><div class="relatedPosts_title">传统的机器学习方法——决策树（上）</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/02/命名实体识别简介（一）/" title="命名实体识别简介（一）"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20200802093111103.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hhcHB5ZXZlcnl5ZGF5,size_16,color_FFFFFF,t_70"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-08-02</div><div class="relatedPosts_title">命名实体识别简介（一）</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/02/论文阅读：Aspect-based Sentiment Classification with Aspect-specific Graph Convolutional Networks/" title="论文阅读：Aspect-based Sentiment Classification with Aspect-specific Graph Convolutional Networks"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.5/img/朱鑫海/8.2/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-08-02</div><div class="relatedPosts_title">论文阅读：Aspect-based Sentiment Classification with Aspect-specific Graph Convolutional Networks</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/02/知识图谱/" title="知识图谱"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.4/img/张明磊/8.2/图片2.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-08-02</div><div class="relatedPosts_title">知识图谱</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/31/论文阅读：What Do We Understand About Convolutional Networks？ 对卷积的了解/" title="论文阅读：What Do We Understand About Convolutional Networks？ 对卷积的了解"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/NLPlab406/NLPlab406.github.io@v1.3/img/周郴莲/7.31/图片1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-31</div><div class="relatedPosts_title">论文阅读：What Do We Understand About Convolutional Networks？ 对卷积的了解</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By 东北石油大学智能技术与自然语言处理实验室</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">欢迎来到我们团队的博客！</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>